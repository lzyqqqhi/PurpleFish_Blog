<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DPR与REM多端适配 | PurpleFish’s Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="这是一个基于 VuePress 的博客">
    
    <link rel="preload" href="/PurpleFish_Blog/assets/css/0.styles.2b0a0130.css" as="style"><link rel="preload" href="/PurpleFish_Blog/assets/js/app.ff8256e3.js" as="script"><link rel="preload" href="/PurpleFish_Blog/assets/js/2.43a24c62.js" as="script"><link rel="preload" href="/PurpleFish_Blog/assets/js/1.6ee28ae7.js" as="script"><link rel="preload" href="/PurpleFish_Blog/assets/js/28.0f04383d.js" as="script"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/10.b04fc0d4.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/11.5a32c356.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/12.6311bbb4.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/13.9f626855.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/14.2a433a45.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/15.f4a73f35.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/16.0da34392.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/17.4ae81fed.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/18.1198418d.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/19.9efc8374.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/20.5d622c1c.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/21.8daff977.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/22.125fbbec.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/23.51842491.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/24.d29f9239.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/25.50b537e5.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/26.a7803a32.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/27.3a646cab.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/29.516bbd6e.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/3.a5bdcc19.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/30.0c3e2a58.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/31.c55b1b7b.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/32.6f42b27f.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/33.5630dc9b.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/34.506ccca3.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/35.525f91fc.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/36.3ed31312.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/37.e0c7ab78.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/38.94c28a78.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/39.0f6ab893.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/4.17635ff9.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/40.31380cbc.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/41.7862120c.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/42.e1b28fea.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/43.bba45c93.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/44.f543bcf0.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/45.b3468082.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/46.ce165ee3.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/47.cd346d62.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/48.f34fd7c9.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/49.04a56087.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/5.bb8f33b7.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/50.944cf170.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/51.875167a9.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/52.37cbc86f.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/53.afa7aef4.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/54.f01744cd.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/55.bf004fec.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/56.86541d80.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/57.851b13ff.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/58.9979010b.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/59.80a18be0.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/6.46359932.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/60.3913a449.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/61.95d9a272.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/62.5e28c5de.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/63.23644217.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/64.e291cd20.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/7.720220fb.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/vendors~docsearch.94b65286.js">
    <link rel="stylesheet" href="/PurpleFish_Blog/assets/css/0.styles.2b0a0130.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/PurpleFish_Blog/" class="home-link router-link-active"><!----> <span class="site-name">PurpleFish’s Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/PurpleFish_Blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/notes/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/articles/" class="nav-link router-link-active">
  文章
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/projects/" class="nav-link">
  项目集
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/PurpleFish_Blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/notes/" class="nav-link">
  笔记
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/articles/" class="nav-link router-link-active">
  文章
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/projects/" class="nav-link">
  项目集
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DPR与REM多端适配</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/PurpleFish_Blog/articles/04DPR%E4%B8%8EREM%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html#代码" class="sidebar-link">代码</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/PurpleFish_Blog/articles/04DPR%E4%B8%8EREM%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html#html-部分" class="sidebar-link">HTML 部分</a></li><li class="sidebar-sub-header"><a href="/PurpleFish_Blog/articles/04DPR%E4%B8%8EREM%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html#css-部分" class="sidebar-link">CSS 部分</a></li><li class="sidebar-sub-header"><a href="/PurpleFish_Blog/articles/04DPR%E4%B8%8EREM%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html#javascript-部分" class="sidebar-link">JavaScript 部分</a></li><li class="sidebar-sub-header"><a href="/PurpleFish_Blog/articles/04DPR%E4%B8%8EREM%E7%A7%BB%E5%8A%A8%E7%AB%AF%E9%80%82%E9%85%8D.html#开发中的作用" class="sidebar-link">开发中的作用</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dpr与rem多端适配"><a href="#dpr与rem多端适配" class="header-anchor">#</a> DPR与REM多端适配</h1> <h2 id="代码"><a href="#代码" class="header-anchor">#</a> 代码</h2> <div class="language-html extra-class"><pre class="language-html"><code><span class="token doctype"><span class="token punctuation">&lt;!</span><span class="token doctype-tag">DOCTYPE</span> <span class="token name">html</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>html</span> <span class="token attr-name">lang</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>en<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>head</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>meta</span> <span class="token attr-name">charset</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>UTF-8<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>title</span><span class="token punctuation">&gt;</span></span>移动端适配<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>title</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">&gt;</span></span><span class="token style"><span class="token language-css">
        <span class="token selector">html</span> <span class="token punctuation">{</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 16px<span class="token punctuation">;</span> <span class="token comment">/* 默认字体大小 */</span>
        <span class="token punctuation">}</span>
        <span class="token selector">body</span> <span class="token punctuation">{</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token selector">.container</span> <span class="token punctuation">{</span>
            <span class="token property">width</span><span class="token punctuation">:</span> 90%<span class="token punctuation">;</span>
            <span class="token property">margin</span><span class="token punctuation">:</span> 0 auto<span class="token punctuation">;</span>
            <span class="token property">padding</span><span class="token punctuation">:</span> 20px<span class="token punctuation">;</span>
            <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #000<span class="token punctuation">;</span>
            <span class="token property">font-size</span><span class="token punctuation">:</span> 1rem<span class="token punctuation">;</span> <span class="token comment">/* 使用 rem 单位 */</span>
        <span class="token punctuation">}</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>head</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        Hello, World!
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>

    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token comment">// 根据 DPR 动态设置 viewport 和 rem 的方法</span>
        <span class="token keyword">function</span> <span class="token function">setViewportAndRem</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">const</span> dpr <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">// 获取设备像素比</span>
            <span class="token keyword">const</span> width <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">;</span> <span class="token comment">// 获取视口宽度</span>
            <span class="token keyword">const</span> scale <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">/</span> dpr<span class="token punctuation">;</span> <span class="token comment">// 计算缩放比例</span>

            <span class="token comment">// 动态设置 viewport</span>
            <span class="token keyword">const</span> metaViewport <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'meta[name=&quot;viewport&quot;]'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>metaViewport<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                metaViewport<span class="token punctuation">.</span>content <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">width=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, initial-scale=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, maximum-scale=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, minimum-scale=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, user-scalable=no</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> viewport <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">'meta'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'viewport'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                viewport<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">'content'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">width=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>width<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, initial-scale=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, maximum-scale=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, minimum-scale=</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>scale<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, user-scalable=no</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                document<span class="token punctuation">.</span>head<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>viewport<span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 设置 rem 大小</span>
            <span class="token keyword">const</span> html <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'html'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">const</span> baseFontSize <span class="token operator">=</span> <span class="token number">16</span><span class="token punctuation">;</span> <span class="token comment">// 默认基础字体大小</span>
            <span class="token keyword">const</span> remSize <span class="token operator">=</span> baseFontSize <span class="token operator">*</span> dpr<span class="token punctuation">;</span> <span class="token comment">// 计算 rem 大小</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">remSize: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>remSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            html<span class="token punctuation">.</span>style<span class="token punctuation">.</span>fontSize <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>remSize<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">px</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// 设置 html 的字体大小</span>
        <span class="token punctuation">}</span>

        <span class="token comment">// 页面加载时调用</span>
        <span class="token function">setViewportAndRem</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 窗口大小改变时重新计算</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'resize'</span><span class="token punctuation">,</span> setViewportAndRem<span class="token punctuation">)</span><span class="token punctuation">;</span>
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>html</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h3 id="html-部分"><a href="#html-部分" class="header-anchor">#</a> HTML 部分</h3> <ul><li><p><strong><code>&lt;!DOCTYPE html&gt;</code></strong> ：声明文档类型为 HTML5，让浏览器以标准模式解析和渲染页面。</p></li> <li><p><strong><code>&lt;html lang=&quot;en&quot;&gt;</code></strong> ：创建 HTML 文档的根元素，<code>lang=&quot;en&quot;</code> 表示页面内容主要使用英语。</p></li> <li><p><strong><code>&lt;head&gt;</code></strong> ：包含文档的元数据，如字符集声明、页面标题和样式信息等。</p> <ul><li><meta charset="UTF-8"> ：指定页面字符编码为 UTF-8，确保页面中的字符能够正确显示，支持多种语言字符。
</li> <li><p><strong><code>&lt;title&gt;移动端适配&lt;/title&gt;</code></strong> ：设置页面的标题，显示在浏览器标签页上。</p></li></ul></li></ul> <h3 id="css-部分"><a href="#css-部分" class="header-anchor">#</a> CSS 部分</h3> <ul><li><strong><code>html {font-size: 16px;}</code></strong> ：设置 HTML 根元素的字体大小为 16 像素，作为页面中其他元素使用 rem 单位的基础度量。</li> <li><strong><code>body {margin: 0; padding: 0;}</code></strong> ：移除 body 元素的默认外边距和内边距，避免页面出现不必要的空白边距。</li> <li><strong><code>.container {width: 90%; margin: 0 auto; padding: 20px; border: 1px solid #000; font-size: 1rem;}</code></strong> ：定义一个容器类样式。
<ul><li><strong><code>width: 90%</code></strong> ：设置容器的宽度为视口宽度的 90%，使内容在不同屏幕尺寸下都能居中显示，适应不同设备的屏幕宽度。【90vw一样效果】</li> <li><strong><code>margin: 0 auto</code></strong> ：将容器水平居中，使其在页面上居中对齐。</li> <li><strong><code>padding: 20px</code></strong> ：为容器设置内边距，使内容与容器边框之间有一定的空间，提升页面内容的可读性。</li> <li><strong><code>border: 1px solid #000</code></strong> ：为容器添加一个黑色的实线边框，用于视觉上的区分和装饰。</li> <li><strong><code>font-size: 1rem</code></strong> ：设置容器内字体大小为 1rem，以根元素的字体大小为基准，便于统一管理页面的文字大小。</li></ul></li></ul> <h3 id="javascript-部分"><a href="#javascript-部分" class="header-anchor">#</a> JavaScript 部分</h3> <ul><li><strong>函数定义和设备像素比获取</strong> <ul><li><strong><code>function setViewportAndRem() {</code></strong> ：定义一个名为 <code>setViewportAndRem</code> 的函数，用于动态设置视口和 rem 单位。</li> <li><strong><code>const dpr = window.devicePixelRatio || 1;</code></strong> ：获取设备的像素比，<code>window.devicePixelRatio</code> 属性表示屏幕的物理像素和 CSS 像素的比率。如果该值不存在，则默认为 1。</li></ul></li> <li><strong>视口宽度和缩放比例计算</strong> <ul><li><strong><code>const width = window.innerWidth;</code></strong> ：获取当前窗口的内宽度，即视口宽度，单位为像素。</li> <li><strong><code>const scale = 1 / dpr;</code></strong> ：计算缩放比例，通过将 1 除以设备像素比得到，目的是根据设备的像素密度来调整页面的缩放程度。</li></ul></li> <li><strong>动态设置 viewport</strong> <ul><li><strong><code>const metaViewport = document.querySelector('meta[name=&quot;viewport&quot;]');</code></strong> ：尝试获取页面中已存在的名为 “viewport” 的 meta 元素。</li> <li><strong><code>if (metaViewport) {</code></strong> ：如果找到了该 meta 元素，则更新其 content 属性。
<ul><li><strong><code>metaViewport.content = width=${width}, initial-scale=${scale}, maximum-scale=${scale}, minimum-scale=${scale}, user-scalable=no;</code></strong> ：设置视口的宽度为当前窗口宽度，初始缩放比例、最大缩放比例和最小缩放比例都设置为计算得到的 scale 值，并且禁用用户缩放功能。这样可以使页面在不同设备上以合适的尺寸和比例显示，避免用户手动缩放导致的页面布局混乱。</li></ul></li> <li><strong><code>else {</code></strong> ：如果没有找到名为 “viewport” 的 meta 元素，则创建一个新的 meta 元素。
<ul><li><strong><code>const viewport = document.createElement('meta');</code></strong> ：创建一个新的 meta 元素。</li> <li><strong><code>viewport.setAttribute('name', 'viewport');</code></strong> ：设置该 meta 元素的 name 属性为 “viewport”。</li> <li><strong><code>viewport.setAttribute('content', width=${width}, initial-scale=${scale}, maximum-scale=${scale}, minimum-scale=${scale}, user-scalable=no);</code></strong> ：设置该 meta 元素的 content 属性，与上述更新已存在 meta 元素时的设置相同。</li> <li><strong><code>document.head.appendChild(viewport);</code></strong> ：将新创建的 meta 元素添加到文档的头部，使其生效。</li></ul></li></ul></li> <li><strong>设置 rem 大小</strong> <ul><li><strong><code>const html = document.querySelector('html');</code></strong> ：获取 HTML 根元素。</li> <li><strong><code>const baseFontSize = 16;</code></strong> ：定义基础字体大小为 16 像素，这与 HTML 根元素初始设置的字体大小一致。</li> <li><strong><code>const remSize = baseFontSize \* dpr;</code></strong> ：根据设备像素比计算 rem 大小，将基础字体大小乘以设备像素比，使 rem 单位能够根据设备的像素密度进行适配。</li> <li><strong><code>html.style.fontSize = remSize + 'px';</code></strong> ：将计算得到的 rem 大小设置为 HTML 根元素的字体大小，这样页面中使用 rem 单位的其他元素的字体大小都会根据这个值进行相应的调整。</li></ul></li> <li><strong>函数调用和事件监听</strong> <ul><li><strong><code>setViewportAndRem();</code></strong> ：在页面加载时立即调用 <code>setViewportAndRem</code> 函数，进行初次的视口和 rem 单位设置。</li> <li><strong><code>window.addEventListener('resize', setViewportAndRem);</code></strong> ：为窗口添加 resize 事件监听器，当窗口大小发生变化时，重新调用 <code>setViewportAndRem</code> 函数，以确保页面的布局和样式能够适应新的窗口尺寸。</li></ul></li></ul> <h3 id="开发中的作用"><a href="#开发中的作用" class="header-anchor">#</a> 开发中的作用</h3> <ul><li><strong>移动端适配</strong> ：通过动态设置 viewport 和 rem 单位，使页面能够根据不同移动设备的屏幕尺寸和像素密度进行自适应调整，确保页面在各种移动设备上都能良好显示，提高用户体验。</li> <li><strong>统一字体管理</strong> ：以 rem 单位为基础设置字体大小，便于对页面中的字体进行统一管理和调整，只需修改 HTML 根元素的字体大小，即可成比例地改变页面中其他使用 rem 单位的元素的字体大小，提高样式管理的便捷性和一致性。</li> <li><strong>提高页面响应式能力</strong> ：能够根据窗口大小的变化实时调整布局和样式，增强了页面的响应式能力，使页面在不同设备和不同屏幕尺寸下都能保持良好的视觉效果和可用性。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/PurpleFish_Blog/assets/js/app.ff8256e3.js" defer></script><script src="/PurpleFish_Blog/assets/js/2.43a24c62.js" defer></script><script src="/PurpleFish_Blog/assets/js/1.6ee28ae7.js" defer></script><script src="/PurpleFish_Blog/assets/js/28.0f04383d.js" defer></script>
  </body>
</html>
