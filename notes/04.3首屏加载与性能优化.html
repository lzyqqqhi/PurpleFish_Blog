<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>首屏加载与性能优化 | PurpleFish’s Blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="这是一个基于 VuePress 的博客">
    
    <link rel="preload" href="/PurpleFish_Blog/assets/css/0.styles.2b0a0130.css" as="style"><link rel="preload" href="/PurpleFish_Blog/assets/js/app.ff8256e3.js" as="script"><link rel="preload" href="/PurpleFish_Blog/assets/js/2.43a24c62.js" as="script"><link rel="preload" href="/PurpleFish_Blog/assets/js/1.6ee28ae7.js" as="script"><link rel="preload" href="/PurpleFish_Blog/assets/js/42.e1b28fea.js" as="script"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/10.b04fc0d4.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/11.5a32c356.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/12.6311bbb4.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/13.9f626855.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/14.2a433a45.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/15.f4a73f35.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/16.0da34392.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/17.4ae81fed.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/18.1198418d.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/19.9efc8374.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/20.5d622c1c.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/21.8daff977.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/22.125fbbec.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/23.51842491.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/24.d29f9239.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/25.50b537e5.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/26.a7803a32.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/27.3a646cab.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/28.0f04383d.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/29.516bbd6e.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/3.a5bdcc19.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/30.0c3e2a58.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/31.c55b1b7b.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/32.6f42b27f.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/33.5630dc9b.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/34.506ccca3.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/35.525f91fc.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/36.3ed31312.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/37.e0c7ab78.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/38.94c28a78.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/39.0f6ab893.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/4.17635ff9.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/40.31380cbc.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/41.7862120c.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/43.bba45c93.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/44.f543bcf0.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/45.b3468082.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/46.ce165ee3.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/47.cd346d62.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/48.f34fd7c9.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/49.04a56087.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/5.bb8f33b7.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/50.944cf170.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/51.875167a9.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/52.37cbc86f.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/53.afa7aef4.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/54.f01744cd.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/55.bf004fec.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/56.86541d80.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/57.851b13ff.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/58.9979010b.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/59.80a18be0.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/6.46359932.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/60.3913a449.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/61.95d9a272.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/62.5e28c5de.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/63.23644217.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/64.e291cd20.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/7.720220fb.js"><link rel="prefetch" href="/PurpleFish_Blog/assets/js/vendors~docsearch.94b65286.js">
    <link rel="stylesheet" href="/PurpleFish_Blog/assets/css/0.styles.2b0a0130.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/PurpleFish_Blog/" class="home-link router-link-active"><!----> <span class="site-name">PurpleFish’s Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/PurpleFish_Blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/notes/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/articles/" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/projects/" class="nav-link">
  项目集
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/PurpleFish_Blog/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/notes/" class="nav-link router-link-active">
  笔记
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/articles/" class="nav-link">
  文章
</a></div><div class="nav-item"><a href="/PurpleFish_Blog/projects/" class="nav-link">
  项目集
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>首屏加载与性能优化</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/PurpleFish_Blog/notes/04.3%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html#一、fsp-first-paint-首次绘制" class="sidebar-link">一、FSP（First Paint，首次绘制）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PurpleFish_Blog/notes/04.3%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html#二、inp-interaction-to-next-paint-交互到下次绘制" class="sidebar-link">二、INP（Interaction to Next Paint，交互到下次绘制）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PurpleFish_Blog/notes/04.3%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html#三、fcp-first-contentful-paint-首次内容绘制" class="sidebar-link">三、FCP（First Contentful Paint，首次内容绘制）</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PurpleFish_Blog/notes/04.3%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html#优化首屏渲染的探索与实践" class="sidebar-link">优化首屏渲染的探索与实践</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PurpleFish_Blog/notes/04.3%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html#一、z-index-与元素区域优化" class="sidebar-link">一、z - index 与元素区域优化</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PurpleFish_Blog/notes/04.3%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html#二、浏览器层级与-gpu-绘制优化" class="sidebar-link">二、浏览器层级与 GPU 绘制优化</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/PurpleFish_Blog/notes/04.3%E9%A6%96%E5%B1%8F%E5%8A%A0%E8%BD%BD%E4%B8%8E%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96.html#三、优化实践案例" class="sidebar-link">三、优化实践案例</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="首屏加载与性能优化"><a href="#首屏加载与性能优化" class="header-anchor">#</a> 首屏加载与性能优化</h1> <h2 id="一、fsp-first-paint-首次绘制"><a href="#一、fsp-first-paint-首次绘制" class="header-anchor">#</a> 一、FSP（First Paint，首次绘制）</h2> <ol><li><strong>定义</strong> ：这是<u>浏览器开始对页面任何内容进行绘制的时间点</u>，内容可以是文字、图像，甚至是一个空白的背景。它标志着浏览器将最初的内容呈现给用户，是用户能感知到浏览器开始 “有动静” 的时刻，哪怕只是很简单的背景色变化等。</li> <li><strong>重要性</strong> ：快速的首次绘制能给用户一种页面正在迅速加载的初步印象，降低用户对页面响应迟缓的感知，提升整体的用户体验。</li> <li><strong>影响因素及优化方向</strong> <ul><li><strong>资源加载</strong> ：浏览器需要先获取诸如 HTML、CSS、JavaScript 等资源才能进行绘制。优化资源加载速度，如通过<u>压缩资源文件、使用 CDN（内容分发网络）加速资源传输、采用合适的缓存策略（如设置 HTTP 缓存头等）</u>，能加快 FSP。</li> <li><strong>代码复杂性</strong> ：复杂的 JavaScript 脚本或 CSS 样式表可能会延迟首次绘制。尽量精简初始加载的代码，避免在首屏渲染阶段执行大量复杂的脚本，对非关键样式可考虑进行<u>懒加载或拆分</u>等方式优化。</li> <li><strong>网络环境</strong> ：良好的网络连接有助于快速获取资源，但在较差的网络环境下，更需要通过上述优化手段来缩小 FSP 的差距。</li></ul></li></ol> <h2 id="二、inp-interaction-to-next-paint-交互到下次绘制"><a href="#二、inp-interaction-to-next-paint-交互到下次绘制" class="header-anchor">#</a> 二、INP（Interaction to Next Paint，交互到下次绘制）</h2> <ol><li><strong>定义</strong> ：用户与网页<u>进行交互动作（如点击按钮、链接、滚动等）后，从交互发生的那一刻起，到浏览器开始绘制与这次交互相关的画面</u>（新内容或新画面变化，比如点击按钮后触发的一个动画效果开始绘制）的时间跨度。它反映了用户操作后页面响应绘制的及时性。</li> <li><strong>重要性</strong> ：较低的 INP 意味着用户操作后能更快看到页面的反馈，能显著提升用户与网页交互时的流畅感和满意度，让用户感觉页面交互是跟手且及时的。</li> <li><strong>影响因素及优化方向</strong> <ul><li><strong>事件处理程序效率</strong> ：如果为交互事件绑定的处理程序执行时间过长，会阻塞后续的绘制操作。优化事件处理函数，减少不必要的计算、DOM 操作等，使其尽量简洁高效。</li> <li><strong>资源加载与准备</strong> ：某些交互可能依赖于额外的资源（如新的图像、动画效果所需的数据等）。提前<u>预加载</u>可能用到的资源，或者在用户交互时采用懒加载并合理安排加载优先级，避免因资源获取延迟而影响 INP。</li> <li><strong>渲染性能</strong> ：浏览器本身的渲染引擎性能以及页面的渲染复杂度（如过多的层叠样式、复杂的布局等）会影响从交互到绘制的时间。优化页面的 CSS 架构，减少过度的层叠和复杂的样式计算，避免不必要的重排和重绘操作，有助于降低 INP。</li></ul></li></ol> <h2 id="三、fcp-first-contentful-paint-首次内容绘制"><a href="#三、fcp-first-contentful-paint-首次内容绘制" class="header-anchor">#</a> 三、FCP（First Contentful Paint，首次内容绘制）</h2> <ol><li><strong>定义</strong> ：指的是浏览<u>器首次渲染与文档内容相关的任何视觉内容</u>的时间点，包括文字、图像、非白色的 canvas 元素等。它比 FSP 更聚焦于实质性的内容呈现，是用户能看到页面上真正有意义内容的开始时刻，用户能初步判断页面是否能提供所需信息的关键时间点。</li> <li><strong>重要性</strong> ：快速的首次内容绘制能有效降低用户的等待焦虑感，让用户更快获取有价值的内容，对提高用户的留存率和继续浏览页面的意愿有着重要的作用，尤其对于内容型网站（如新闻、博客等）更为关键。</li> <li><strong>影响因素及优化方向</strong> <ul><li><strong>关键资源加载</strong> ：与首屏内容展示直接相关的资源（如首屏的图片、文字排版所需的 CSS、关键的 JavaScript 等）的加载速度至关重要。对这些关键资源进行优先加载、压缩优化以及确保其加载路径的高效性，能加快 FCP。</li> <li><strong>HTML 结构与 CSS 样式</strong> ：复杂的 HTML 结构和大量未优化的 CSS 样式可能会导致浏览器在计算样式和布局时耗费较多时间，从而延迟 FCP。简化 HTML 代码，优化 CSS 选择器，采用合理的 CSS 架构（如避免使用过多的后代选择器等），减少样式的复杂度可以提升 FCP。</li> <li><strong>JavaScript 执行</strong> ：如果在首屏内容渲染前执行了较多的 JavaScript 代码，可能会阻塞渲染过程。将非关键的 JavaScript 延迟<u>加载或异步加载</u>，确保关键的渲染流程不被过多的脚本执行干扰，有助于优化 FCP。</li></ul></li></ol> <h2 id="优化首屏渲染的探索与实践"><a href="#优化首屏渲染的探索与实践" class="header-anchor">#</a> 优化首屏渲染的探索与实践</h2> <p>在网页性能优化的旅程中，首屏渲染速度的提升是关键一环。它直接关系到用户体验和留存率。本文将深入探讨如何通过优化 z - index 属性和利用 GPU 绘制来提升首屏渲染性能。</p> <h2 id="一、z-index-与元素区域优化"><a href="#一、z-index-与元素区域优化" class="header-anchor">#</a> 一、z - index 与元素区域优化</h2> <p>z - index 属性，这个看似简单的 CSS 属性，在首屏渲染优化中扮演着重要角色。它不仅决定了元素的堆叠顺序，还影响着浏览器的渲染效率。当元素的 z - index 设置不合理时，可能会导致不必要的元素重叠，进而引发重绘和回流问题。</p> <p>重绘和回流是网页性能优化中的两个关键概念。重绘是指元素的外观改变（如颜色、边框等）但不涉及布局的变化，而回流则是元素的布局发生变化，导致浏览器需要重新计算元素的位置和尺寸。回流通常比重绘更耗时，因为它涉及到整个文档或部分文档的重新布局。</p> <p>在首屏渲染中，我们可以通过以下方式优化 z - index 属性：</p> <ol><li><p><strong>合理设置 z - index 值</strong>：确保元素的堆叠顺序符合设计要求，同时避免过多的层次嵌套。过多的层次嵌套会增加浏览器的渲染复杂度。</p></li> <li><p><strong>减少不必要的元素重叠</strong>：检查页面布局，去除那些对用户体验没有实际帮助的重叠元素。例如，某些装饰性的元素可以考虑简化或移除。</p></li> <li><p><strong>优化元素区域大小</strong>：对于那些 z - index 值较大的元素，尽量减小其区域大小。这样可以减少浏览器在渲染时的计算量，提高渲染效率。</p></li></ol> <h2 id="二、浏览器层级与-gpu-绘制优化"><a href="#二、浏览器层级与-gpu-绘制优化" class="header-anchor">#</a> 二、浏览器层级与 GPU 绘制优化</h2> <p>浏览器在渲染网页时会创建多个层级。这些层级包括文档层级、元素层级等。复杂网页可能会导致浏览器创建过多的层级，增加渲染的复杂度。</p> <p>为了优化首屏渲染，我们可以从以下几个方面入手：</p> <ol><li><p><strong>减少不必要的层级嵌套</strong>：简化 HTML 结构，避免使用过多的嵌套标签。例如，使用语义化的 HTML 标签，可以减少不必要的 div 嵌套。</p></li> <li><p><strong>利用 GPU 绘制</strong>：现代浏览器支持利用 GPU 来加速图形绘制。我们可以通过使用合适的 CSS 属性来触发 GPU 绘制。常用的触发 GPU 绘制的 CSS 属性包括 transform（如 translate、rotate、scale 等）、opacity 等。</p></li> <li><p><strong>合理使用 GPU 绘制</strong>：虽然 GPU 绘制可以提升渲染性能，但过度使用也可能导致资源浪费和潜在的性能问题。因此，我们在使用 GPU 绘制时，需要注意以下几点：</p> <ul><li><strong>选择关键元素</strong>：将 GPU 绘制应用于首屏中重要的图像、动画元素等，而不是所有元素。</li> <li><strong>避免过度使用</strong>：不要对大量元素同时应用 GPU 绘制，以免占用过多的 GPU 资源。</li> <li><strong>测试和监控</strong>：在实际项目中，我们需要对使用 GPU 绘制的元素进行测试和监控，确保其性能表现符合预期。</li></ul></li></ol> <h2 id="三、优化实践案例"><a href="#三、优化实践案例" class="header-anchor">#</a> 三、优化实践案例</h2> <p>为了更好地理解这些优化方法的实际效果，我们来看一个实践案例。</p> <p>假设我们有一个新闻网站的首页。页面包含多个新闻卡片，每个卡片包含图片、标题和摘要信息。为了提升首屏渲染速度，我们可以进行以下优化：</p> <ol><li><strong>优化 z - index 属性</strong>：检查新闻卡片的布局，确保 z - index 值设置合理。去除不必要的元素重叠，减小新闻卡片的区域大小。</li> <li><strong>利用 GPU 绘制</strong>：为新闻卡片的图片应用 transform 属性，例如使用 <code>transform: translateZ(0)</code> 来触发 GPU 绘制。这样可以加速图片的渲染。</li> <li><strong>减少层级嵌套</strong>：简化新闻卡片的 HTML 结构，减少不必要的 div 嵌套。使用语义化的 HTML 标签，如 article、section 等。</li></ol> <p>通过这些优化措施，我们可以显著提升新闻网站首页的首屏渲染速度。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/PurpleFish_Blog/assets/js/app.ff8256e3.js" defer></script><script src="/PurpleFish_Blog/assets/js/2.43a24c62.js" defer></script><script src="/PurpleFish_Blog/assets/js/1.6ee28ae7.js" defer></script><script src="/PurpleFish_Blog/assets/js/42.e1b28fea.js" defer></script>
  </body>
</html>
