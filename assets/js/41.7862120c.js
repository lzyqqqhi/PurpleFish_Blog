(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{361:function(v,_,t){"use strict";t.r(_);var s=t(27),r=Object(s.a)({},(function(){var v=this,_=v._self._c;return _("ContentSlotsDistributor",{attrs:{"slot-key":v.$parent.slotKey}},[_("h1",{attrs:{id:"dns"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dns"}},[v._v("#")]),v._v(" DNS")]),v._v(" "),_("h2",{attrs:{id:"dns-解析过程"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dns-解析过程"}},[v._v("#")]),v._v(" DNS 解析过程")]),v._v(" "),_("ol",[_("li",[_("strong",[v._v("用户发起请求")]),v._v(" ：用户在浏览器输入域名，浏览器先查本地缓存，若有对应 IP 地址则直接使用；若没有，向本地 DNS 服务器发起查询请求。")]),v._v(" "),_("li",[_("strong",[v._v("本地 DNS 服务器查询")]),v._v(" ：本地 DNS 服务器收到请求后，先查自身缓存，若有记录则返回客户端；若没有，作为 DNS 客户端代替用户向根服务器发起递归查询。")]),v._v(" "),_("li",[_("strong",[v._v("根域名服务器响应")]),v._v(" ：根服务器收到请求，若不知晓最终结果，会告知本地 DNS 服务器应向哪个顶级服务器查询，并返回顶级服务器的地址。")]),v._v(" "),_("li",[_("strong",[v._v("顶级域名服务器响应")]),v._v(" ：本地 DNS 服务器向顶级服务器发起请求，顶级服务器同样若不能直接解析出 IP 地址，会告知下一级权威域名服务器的地址。")]),v._v(" "),_("li",[_("strong",[v._v("权威域名服务器响应")]),v._v(" ：本地 DNS 服务器向权威服务器发起请求，权威服务器查询存储的域名和 IP 的映射关系表，将域名对应的 IP 地址等信息连同 TTL 值返回给本地 DNS 服务器。")]),v._v(" "),_("li",[_("strong",[v._v("返回结果给用户")]),v._v(" ：本地 DNS 服务器将得到的 IP 地址缓存，并将结果返回给用户，用户获得 IP 地址后，即可与对应的主机建立连接。")])]),v._v(" "),_("h2",{attrs:{id:"dns-解析相关知识"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#dns-解析相关知识"}},[v._v("#")]),v._v(" DNS 解析相关知识")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("DNS 查询过程")]),v._v(" ：当用户在浏览器输入网址时，浏览器会先检查自身缓存是否有该域名对应的 IP 地址记录，若有则直接使用；若没有，会向操作系统发出请求，查询系统缓存。若系统缓存也无该记录，操作系统会查找域名服务器，先查询本地域名服务器，若本地域名服务器无记录，则向根域名服务器查询顶级域名服务器地址，再由根域名服务器返回顶级域名服务器地址，本地域名服务器向顶级域名服务器查询二级域名服务器地址，最后得到域名对应的 IP 地址。")]),v._v(" "),_("li",[_("strong",[v._v("DNS 预解析")]),v._v(" ：前端可通过在 HTML 中使用"),_("code",[v._v('<link rel="dns-prefetch" href="//example.com">')]),v._v("或设置"),_("code",[v._v('<meta http-equiv="x-dns-prefetch-control" content="on">')]),v._v("来"),_("strong",[v._v("实现 DNS 预解析")]),v._v("，让浏览器提前解析页面中可能需要访问的域名，减少用户点击链接后的等待时间，提升页面加载速度。")]),v._v(" "),_("li",[_("strong",[v._v("减少 DNS 查询次数")]),v._v(" ：避免在一个页面中使用过多不同域名的资源请求，因为每次对不同域名的请求都会进行 DNS 查询，会增加页面加载时间。可将外部资源提前下载到同域名的服务器上，或合理规划域名的使用。")])]),v._v(" "),_("h2",{attrs:{id:"cdn-优先匹配算法策略"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#cdn-优先匹配算法策略"}},[v._v("#")]),v._v(" CDN 优先匹配算法策略")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("基于地理位置的匹配")]),v._v(" ：通过用户的 IP 地址识别其地理位置，然后将用户的请求定向到"),_("strong",[v._v("距离其最近的 CDN 节点")]),v._v("。这样可以减少数据传输的距离和延迟，提高访问速度。例如，一个中国上海的用户访问网站时，DNS 服务器会将其请求解析到位于上海或离上海最近的 CDN 节点。")]),v._v(" "),_("li",[_("strong",[v._v("基于网络状况的匹配")]),v._v(" ：根据用户当前网络的带宽、延迟和丢包率等信息，为用户选择最佳服务器。比如，当用户在网络状况不佳时，CDN 系统会将其请求分配到网络质量相对较好的节点，以确保用户能够获得较好的访问体验。")]),v._v(" "),_("li",[_("strong",[v._v("基于设备类型的匹配")]),v._v(" ：不同设备通常有不同的网络条件和展示需求。智能 DNS 会根据用户使用的设备，如手机、PC 或平板等，"),_("strong",[v._v("智能地调整所请求的内容")]),v._v("。例如，对于移动设备，可能会提供压缩过的图像或简化版的页面，以优化用户的访问体验。")]),v._v(" "),_("li",[_("strong",[v._v("基于内容分发协议的匹配")]),v._v(" ：不同的 CDN 提供商可能使用不同的内容分发协议和算法，这些协议和算法会影响资源的分发效率和访问速度。一些先进的 CDN 技术，如 Anycast 路由协议，可以将用户的请求智能地分配到最优的服务器节点，实现快速稳定的内容分发。")]),v._v(" "),_("li",[_("strong",[v._v("缓存规则匹配")]),v._v(" ：CDN 会根据预先设定"),_("strong",[v._v("的缓存规则")]),v._v("来匹配和处理用户的请求。缓存规则可以基于文件后缀、目录路径或文件全路径等条件进行设置，并且规则具有优先级，数字 1 的规则优先级最高。当用户的请求与缓存规则匹配时，CDN 会优先返回缓存中的资源，减少对源站的访问，提高资源的加载速度。")]),v._v(" "),_("li",[v._v("在有 CDN 的情况下，CDN 的优先匹配算法策略会在 DNS 解析过程中发挥作用：\n"),_("ul",[_("li",[_("strong",[v._v("全球负载均衡（GSLB）")]),v._v(" ：通过 GSLB 设备，根据用户本地 DNS 的 IP 地址等信息，将用户优先分配到距离最近或最适合的 CDN 节点。例如，可基于地理区域或用户自定义区域进行划分，将特定 IP 范围的用户优先分配到某个通过健康检查的站点。")]),v._v(" "),_("li",[_("strong",[v._v("RTT（往返时间）策略")]),v._v(" ：选择 RTT 值最小的站点的 VIP 返回给 LDNS，以此来选择最适合用户的 CDN 节点。其中，Passive RTT 测量更实用，它从用户向返回的 VIP 建立连接时进行采集，不会主动测量，也不会产生额外的数据流量。")]),v._v(" "),_("li",[_("strong",[v._v("IP 地址权重")]),v._v(" ：为 DNS 应答中的"),_("strong",[v._v("每个 IP 地址分配权重")]),v._v("，权重决定与其他候选 IP 相比分配到该 IP 的流量比例，从而合理地将用户请求分配到不同的 CDN 节点。")])])])]),v._v(" "),_("h2",{attrs:{id:"前端与-dns-及-cdn-的关联应用"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#前端与-dns-及-cdn-的关联应用"}},[v._v("#")]),v._v(" 前端与 DNS 及 CDN 的关联应用")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("域名配置与解析")]),v._v(" ：前端开发中，需要"),_("strong",[v._v("确保网站的域名正确配置了 CDN 的 CNAME 地址")]),v._v("，以便用户通过域名访问时能够正确解析到 CDN 节点。同时，合理设置域名的 "),_("strong",[v._v("TTL（Time to Live）值，平衡 DNS 缓存时间和更新及时性")]),v._v("。")]),v._v(" "),_("li",[_("strong",[v._v("资源加载优化")]),v._v(" ：借助 CDN 的优势，前端应"),_("strong",[v._v("尽量将网站的静态资源（如图片、CSS、JavaScript 文件等）托管到 CDN 上")]),v._v("，并通过域名映射的方式进行加载。在代码中引用这些资源时，使用 CDN 的域名，确保用户能够快速获取资源。此外，还可以结合资源的版本号或缓存控制策略，避免因缓存问题导致用户无法获取到最新的资源。")]),v._v(" "),_("li",[_("strong",[v._v("性能监测与分析")]),v._v(" ：前端可以通过性能监测工具，如浏览器的开发者工具、第三方性能监测服务等，分析 DNS 解析时间和资源加载时间等指标，评估 DNS 及 CDN 的性能表现。根据监测结果，发现问题并进行优化，例如调整缓存策略、更换 CDN 服务商或优化资源的分布等。")])]),v._v(" "),_("h4",{attrs:{id:"注意事项"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#注意事项"}},[v._v("#")]),v._v(" 注意事项")]),v._v(" "),_("ul",[_("li",[_("strong",[v._v("CDN 缓存更新问题")]),v._v(" ：由于 CDN 节点有缓存机制，当源站的内容更新后，CDN 节点上的缓存可能不会立即更新，导致用户访问到的不是最新的内容。可以通过设置合理的缓存过期时间、主动刷新缓存或使用版本号等方式来解决这个问题。")]),v._v(" "),_("li",[_("strong",[v._v("故障转移机制")]),v._v(" ：了解 CDN 的故障转移机制，在某些 CDN 节点出现故障时，DNS 能够自动将用户的请求切换到其他可用的节点，确保服务的高可用性。前端开发中可以关注 CDN 服务商提供的故障转移配置和相关文档，以便在需要时进行调整和优化。")])]),v._v(" "),_("h2",{attrs:{id:"tcp-ip-协议-ip-分配的规则-过程原理"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#tcp-ip-协议-ip-分配的规则-过程原理"}},[v._v("#")]),v._v(" TCP/IP 协议（IP 分配的规则）过程原理")]),v._v(" "),_("ol",[_("li",[_("strong",[v._v("确定目标 IP 地址与端口号")]),v._v(" ：通过 DNS 解析得到目标服务器的 IP 地址后，还需确定通信所使用的端口号。不同的服务通常使用特定的端口号，如 HTTP 协议默认使用 80 端口，HTTPS 协议默认使用 443 端口等。")]),v._v(" "),_("li",[_("strong",[v._v("网络接口选择与 IP 寻址")]),v._v(" ：本地设备需确定通过哪个网络接口发送数据。操作系统根据路由表选择最佳的网络接口，并确定数据包的源 IP 地址。若本地设备与目标服务器处于同一个网络，数据包直接发送到目标服务器；若处于不同网络，数据包发送到本地网络的默认网关，由网关负责转发。")]),v._v(" "),_("li",[_("strong",[v._v("建立 TCP 连接（三次握手）")]),v._v(" ：客户端向服务器发送一个 SYN 报文段，随机选择初始序列号；服务器收到后，发送一个 ACK 报文段，同时将 SYN 位置为 1，并携带自己的初始序列号；客户端收到服务器的 SYN+ACK 报文段后，向服务器发送一个 ACK 报文段，确认号为服务器 SEQ 加 1，至此 TCP 连接建立完成。")]),v._v(" "),_("li",[_("strong",[v._v("发送数据报文")]),v._v(" ：TCP 连接建立后，客户端通过该连接，将用户请求的数据封装到 TCP 报文段的数据部分，通过 IP 协议传输到服务器。服务器接收到数据后进行处理，并将响应数据封装到 TCP 报文段的数据部分，通过 IP 协议发送回客户端。")]),v._v(" "),_("li",[_("strong",[v._v("数据传输过程中的 IP 寻址与路由")]),v._v(" ：在整个数据传输过程中，数据以 IP 数据报的形式在网络中传输，每个 IP 数据报都包含源 IP 地址和目标 IP 地址。网络中的路由器根据目标 IP 地址和自身的路由表，确定数据报的转发路径，直到数据报到达目标服务器或客户端。")]),v._v(" "),_("li",[_("strong",[v._v("关闭 TCP 连接（四次挥手）")]),v._v(" ：客户端发送一个 FIN 报文段给服务器，表示无数据发送；服务器收到后，发送一个 ACK 报文段给客户端；服务器完成数据发送后，发送一个 FIN 报文段给客户端；客户端收到后，发送一个 ACK 报文段给服务器，确认收到关闭请求，至此 TCP 连接关闭。")])]),v._v(" "),_("h2",{attrs:{id:"ip-分配的规则"}},[_("a",{staticClass:"header-anchor",attrs:{href:"#ip-分配的规则"}},[v._v("#")]),v._v(" IP 分配的规则")]),v._v(" "),_("ol",[_("li",[_("strong",[v._v("IPv4 地址分配")]),v._v(" ：通常由互联网服务提供商（ISP）从互联网注册管理机构（IR）申请获得一定范围的公有 IP 地址，并将这些地址分配给用户。私有 IP 地址由网络管理员在内部网络中手动或自动分配，通过 NAT 技术将私有 IP 地址映射为公有 IP 地址，实现内部网络设备与外部互联网的通信。IPv4 地址分为 A、B、C、D、E 五类，A、B、C 类地址用于不同规模的网络，D 类地址用于多播通信，E 类地址保留用于科研实验。")]),v._v(" "),_("li",[_("strong",[v._v("IPv6 地址分配")]),v._v(" ：IPv6 地址有全局单播地址、链路本地地址、唯一本地地址、多播地址、任播地址等多种类型。其中，全局单播地址用于全球范围的唯一标识，链路本地地址自动配置且仅在本地链路内有效，唯一本地地址用于私有网络。")])])])}),[],!1,null,null,null);_.default=r.exports}}]);